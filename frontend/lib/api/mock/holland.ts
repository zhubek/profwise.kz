import type { TestSection, Question, RIASECCategory, TestResults } from '@/types/test';

export const HOLLAND_TEST_ID = 'test-1'; // Holland Test (RIASEC)

// Mock Holland Test Sections with questions
export const hollandTestSections: TestSection[] = [
  {
    id: 'section-1',
    testId: HOLLAND_TEST_ID,
    title: 'Realistic Activities',
    description: 'Rate how much you enjoy working with tools, machines, and outdoor activities',
    order: 1,
    questions: [
      {
        id: 'r1',
        sectionId: 'section-1',
        text: 'Work with tools and machines',
        type: 'likert',
        order: 1,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'R',
        options: [
          { id: 'r1-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'r1-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'r1-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'r1-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'r1-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'r2',
        sectionId: 'section-1',
        text: 'Build or fix things',
        type: 'likert',
        order: 2,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'R',
        options: [
          { id: 'r2-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'r2-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'r2-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'r2-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'r2-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'r3',
        sectionId: 'section-1',
        text: 'Work outdoors',
        type: 'likert',
        order: 3,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'R',
        options: [
          { id: 'r3-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'r3-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'r3-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'r3-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'r3-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'r4',
        sectionId: 'section-1',
        text: 'Which of these activities appeals to you most?',
        type: 'single_choice',
        order: 4,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'R',
        options: [
          { id: 'r4-1', text: 'Operating heavy machinery', value: 'machinery', order: 1 },
          { id: 'r4-2', text: 'Working with animals', value: 'animals', order: 2 },
          { id: 'r4-3', text: 'Building structures', value: 'building', order: 3 },
          { id: 'r4-4', text: 'Repairing electronics', value: 'electronics', order: 4 },
        ],
      },
      {
        id: 'r5',
        sectionId: 'section-1',
        text: 'Select all work environments where you would feel comfortable',
        type: 'multiple_choice',
        order: 5,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'R',
        options: [
          { id: 'r5-1', text: 'Workshop or garage', value: 'workshop', order: 1 },
          { id: 'r5-2', text: 'Construction site', value: 'construction', order: 2 },
          { id: 'r5-3', text: 'Farm or ranch', value: 'farm', order: 3 },
          { id: 'r5-4', text: 'Factory or plant', value: 'factory', order: 4 },
        ],
      },
    ],
  },
  {
    id: 'section-2',
    testId: HOLLAND_TEST_ID,
    title: 'Investigative Activities',
    description: 'Rate how much you enjoy research, analysis, and problem-solving',
    order: 2,
    questions: [
      {
        id: 'i1',
        sectionId: 'section-2',
        text: 'Conduct research or experiments',
        type: 'likert',
        order: 1,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'I',
        options: [
          { id: 'i1-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'i1-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'i1-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'i1-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'i1-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'i2',
        sectionId: 'section-2',
        text: 'Analyze data or information',
        type: 'likert',
        order: 2,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'I',
        options: [
          { id: 'i2-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'i2-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'i2-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'i2-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'i2-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'i3',
        sectionId: 'section-2',
        text: 'Solve complex problems',
        type: 'likert',
        order: 3,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'I',
        options: [
          { id: 'i3-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'i3-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'i3-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'i3-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'i3-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'i4',
        sectionId: 'section-2',
        text: 'Which field of study interests you most?',
        type: 'single_choice',
        order: 4,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'I',
        options: [
          { id: 'i4-1', text: 'Mathematics and Statistics', value: 'math', order: 1 },
          { id: 'i4-2', text: 'Natural Sciences (Biology, Chemistry, Physics)', value: 'science', order: 2 },
          { id: 'i4-3', text: 'Computer Science and Technology', value: 'tech', order: 3 },
          { id: 'i4-4', text: 'Medical Research', value: 'medical', order: 4 },
        ],
      },
      {
        id: 'i5',
        sectionId: 'section-2',
        text: 'Select all research methods you find appealing',
        type: 'multiple_choice',
        order: 5,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'I',
        options: [
          { id: 'i5-1', text: 'Laboratory experiments', value: 'lab', order: 1 },
          { id: 'i5-2', text: 'Data analysis and statistics', value: 'data', order: 2 },
          { id: 'i5-3', text: 'Field studies', value: 'field', order: 3 },
          { id: 'i5-4', text: 'Theoretical modeling', value: 'modeling', order: 4 },
        ],
      },
    ],
  },
  {
    id: 'section-3',
    testId: HOLLAND_TEST_ID,
    title: 'Artistic Activities',
    description: 'Rate how much you enjoy creative expression and artistic activities',
    order: 3,
    questions: [
      {
        id: 'a1',
        sectionId: 'section-3',
        text: 'Create artistic designs',
        type: 'likert',
        order: 1,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'A',
        options: [
          { id: 'a1-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'a1-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'a1-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'a1-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'a1-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'a2',
        sectionId: 'section-3',
        text: 'Play a musical instrument',
        type: 'likert',
        order: 2,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'A',
        options: [
          { id: 'a2-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'a2-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'a2-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'a2-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'a2-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'a3',
        sectionId: 'section-3',
        text: 'Write stories or poems',
        type: 'likert',
        order: 3,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'A',
        options: [
          { id: 'a3-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'a3-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'a3-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'a3-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'a3-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'a4',
        sectionId: 'section-3',
        text: 'Which creative medium do you prefer?',
        type: 'single_choice',
        order: 4,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'A',
        options: [
          { id: 'a4-1', text: 'Visual arts (painting, drawing, photography)', value: 'visual', order: 1 },
          { id: 'a4-2', text: 'Performing arts (music, dance, theater)', value: 'performing', order: 2 },
          { id: 'a4-3', text: 'Writing and literature', value: 'writing', order: 3 },
          { id: 'a4-4', text: 'Digital and multimedia arts', value: 'digital', order: 4 },
        ],
      },
      {
        id: 'a5',
        sectionId: 'section-3',
        text: 'Select all creative activities you enjoy',
        type: 'multiple_choice',
        order: 5,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'A',
        options: [
          { id: 'a5-1', text: 'Sketching and illustrating', value: 'sketch', order: 1 },
          { id: 'a5-2', text: 'Playing music or singing', value: 'music', order: 2 },
          { id: 'a5-3', text: 'Photography or videography', value: 'photo', order: 3 },
          { id: 'a5-4', text: 'Crafts and DIY projects', value: 'crafts', order: 4 },
        ],
      },
    ],
  },
  {
    id: 'section-4',
    testId: HOLLAND_TEST_ID,
    title: 'Social Activities',
    description: 'Rate how much you enjoy helping and working with other people',
    order: 4,
    questions: [
      {
        id: 's1',
        sectionId: 'section-4',
        text: 'Teach or train others',
        type: 'likert',
        order: 1,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'S',
        options: [
          { id: 's1-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 's1-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 's1-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 's1-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 's1-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 's2',
        sectionId: 'section-4',
        text: 'Help people with personal problems',
        type: 'likert',
        order: 2,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'S',
        options: [
          { id: 's2-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 's2-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 's2-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 's2-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 's2-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 's3',
        sectionId: 'section-4',
        text: 'Work in a team',
        type: 'likert',
        order: 3,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'S',
        options: [
          { id: 's3-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 's3-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 's3-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 's3-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 's3-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 's4',
        sectionId: 'section-4',
        text: 'Which helping role appeals to you most?',
        type: 'single_choice',
        order: 4,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'S',
        options: [
          { id: 's4-1', text: 'Teacher or educator', value: 'teacher', order: 1 },
          { id: 's4-2', text: 'Counselor or therapist', value: 'counselor', order: 2 },
          { id: 's4-3', text: 'Healthcare provider', value: 'healthcare', order: 3 },
          { id: 's4-4', text: 'Social worker', value: 'social', order: 4 },
        ],
      },
      {
        id: 's5',
        sectionId: 'section-4',
        text: 'Select all people-oriented skills you possess',
        type: 'multiple_choice',
        order: 5,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'S',
        options: [
          { id: 's5-1', text: 'Active listening', value: 'listening', order: 1 },
          { id: 's5-2', text: 'Empathy and understanding', value: 'empathy', order: 2 },
          { id: 's5-3', text: 'Conflict resolution', value: 'conflict', order: 3 },
          { id: 's5-4', text: 'Motivating others', value: 'motivating', order: 4 },
        ],
      },
    ],
  },
  {
    id: 'section-5',
    testId: HOLLAND_TEST_ID,
    title: 'Enterprising Activities',
    description: 'Rate how much you enjoy leadership and business activities',
    order: 5,
    questions: [
      {
        id: 'e1',
        sectionId: 'section-5',
        text: 'Lead a group or organization',
        type: 'likert',
        order: 1,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'E',
        options: [
          { id: 'e1-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'e1-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'e1-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'e1-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'e1-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'e2',
        sectionId: 'section-5',
        text: 'Sell products or services',
        type: 'likert',
        order: 2,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'E',
        options: [
          { id: 'e2-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'e2-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'e2-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'e2-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'e2-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'e3',
        sectionId: 'section-5',
        text: 'Manage a business',
        type: 'likert',
        order: 3,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'E',
        options: [
          { id: 'e3-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'e3-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'e3-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'e3-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'e3-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'e4',
        sectionId: 'section-5',
        text: 'Which business area interests you most?',
        type: 'single_choice',
        order: 4,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'E',
        options: [
          { id: 'e4-1', text: 'Sales and marketing', value: 'sales', order: 1 },
          { id: 'e4-2', text: 'Entrepreneurship', value: 'entrepreneur', order: 2 },
          { id: 'e4-3', text: 'Management and leadership', value: 'management', order: 3 },
          { id: 'e4-4', text: 'Finance and investing', value: 'finance', order: 4 },
        ],
      },
      {
        id: 'e5',
        sectionId: 'section-5',
        text: 'Select all leadership qualities you have',
        type: 'multiple_choice',
        order: 5,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'E',
        options: [
          { id: 'e5-1', text: 'Decision-making', value: 'decision', order: 1 },
          { id: 'e5-2', text: 'Persuasion and influence', value: 'persuasion', order: 2 },
          { id: 'e5-3', text: 'Strategic thinking', value: 'strategic', order: 3 },
          { id: 'e5-4', text: 'Risk-taking', value: 'risk', order: 4 },
        ],
      },
    ],
  },
  {
    id: 'section-6',
    testId: HOLLAND_TEST_ID,
    title: 'Conventional Activities',
    description: 'Rate how much you enjoy organized, detail-oriented work',
    order: 6,
    questions: [
      {
        id: 'c1',
        sectionId: 'section-6',
        text: 'Work with numbers and records',
        type: 'likert',
        order: 1,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'C',
        options: [
          { id: 'c1-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'c1-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'c1-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'c1-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'c1-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'c2',
        sectionId: 'section-6',
        text: 'Follow detailed instructions',
        type: 'likert',
        order: 2,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'C',
        options: [
          { id: 'c2-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'c2-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'c2-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'c2-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'c2-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'c3',
        sectionId: 'section-6',
        text: 'Organize files or information',
        type: 'likert',
        order: 3,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'C',
        options: [
          { id: 'c3-1', text: 'Not interesting', value: 1, order: 1 },
          { id: 'c3-2', text: 'Slightly interesting', value: 2, order: 2 },
          { id: 'c3-3', text: 'Moderately interesting', value: 3, order: 3 },
          { id: 'c3-4', text: 'Very interesting', value: 4, order: 4 },
          { id: 'c3-5', text: 'Extremely interesting', value: 5, order: 5 },
        ],
      },
      {
        id: 'c4',
        sectionId: 'section-6',
        text: 'Which type of organized work do you prefer?',
        type: 'single_choice',
        order: 4,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'C',
        options: [
          { id: 'c4-1', text: 'Accounting and bookkeeping', value: 'accounting', order: 1 },
          { id: 'c4-2', text: 'Data entry and management', value: 'data', order: 2 },
          { id: 'c4-3', text: 'Administrative support', value: 'admin', order: 3 },
          { id: 'c4-4', text: 'Quality control', value: 'quality', order: 4 },
        ],
      },
      {
        id: 'c5',
        sectionId: 'section-6',
        text: 'Select all organizational skills you have',
        type: 'multiple_choice',
        order: 5,
        required: true,
        archetypeCategory: 'interests',
        archetypeCode: 'C',
        options: [
          { id: 'c5-1', text: 'Attention to detail', value: 'detail', order: 1 },
          { id: 'c5-2', text: 'Time management', value: 'time', order: 2 },
          { id: 'c5-3', text: 'Record keeping', value: 'records', order: 3 },
          { id: 'c5-4', text: 'Following procedures', value: 'procedures', order: 4 },
        ],
      },
    ],
  },
];

// API functions
export async function getHollandTestSections(): Promise<TestSection[]> {
  return hollandTestSections;
}

export async function submitHollandTest(
  userId: string,
  testId: string,
  answers: Record<string, number | string | string[]>
): Promise<TestResults> {

  // Calculate RIASEC scores
  const riasecScores = {
    realistic: 0,
    investigative: 0,
    artistic: 0,
    social: 0,
    enterprising: 0,
    conventional: 0,
  };

  // Sum up scores for each category
  Object.entries(answers).forEach(([questionId, answer]) => {
    const question = hollandTestSections
      .flatMap(section => section.questions)
      .find(q => q.id === questionId);

    if (question && question.archetypeCode && typeof answer === 'number') {
      const code = question.archetypeCode.toLowerCase();
      if (code === 'r') riasecScores.realistic += answer;
      else if (code === 'i') riasecScores.investigative += answer;
      else if (code === 'a') riasecScores.artistic += answer;
      else if (code === 's') riasecScores.social += answer;
      else if (code === 'e') riasecScores.enterprising += answer;
      else if (code === 'c') riasecScores.conventional += answer;
    }
  });

  return {
    id: `result-${Date.now()}`,
    userTestId: `usertest-${Date.now()}`,
    testId,
    userId,
    archetypeScores: {
      interests: {
        realistic: riasecScores.realistic,
        investigative: riasecScores.investigative,
        artistic: riasecScores.artistic,
        social: riasecScores.social,
        enterprising: riasecScores.enterprising,
        conventional: riasecScores.conventional,
      },
    },
    riasecScores,
    matchedProfessions: ['prof-1', 'prof-2', 'prof-3'], // Mock matched professions
    generatedAt: new Date().toISOString(),
  };
}
